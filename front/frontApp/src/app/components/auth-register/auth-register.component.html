<div class="container">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h2>Crear cuenta</h2>

    <!-- Username Field -->
    <div class="input-group">
      <span class="icon">ğŸ‘¤</span>
      <input id="username" type="text" formControlName="username" placeholder="Nombre de usuario" required [ngClass]="{'is-invalid': form.get('username')?.invalid && (form.get('username')?.dirty || form.get('username')?.touched), 'is-valid': form.get('username')?.valid}">
    </div>
    <small *ngIf="form.get('username')?.hasError('required') && (form.get('username')?.dirty || form.get('username')?.touched)" class="error-text">
      El nombre de usuario es obligatorio.
    </small>
    <small *ngIf="form.get('username')?.hasError('minlength') && (form.get('username')?.dirty || form.get('username')?.touched)" class="error-text">
      MÃ­nimo 5 caracteres.
    </small>

    <!-- Email Field -->
    <div class="input-group">
      <span class="icon">ğŸ“§</span>
      <input id="email" type="email" formControlName="email" placeholder="Correo electrÃ³nico" required [ngClass]="{'is-invalid': form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched), 'is-valid': form.get('email')?.valid}">
    </div>
    <small *ngIf="form.get('email')?.hasError('required') && (form.get('email')?.dirty || form.get('email')?.touched)" class="error-text">
      El correo electrÃ³nico es obligatorio.
    </small>
    <small *ngIf="form.get('email')?.hasError('email') && (form.get('email')?.dirty || form.get('email')?.touched)" class="error-text">
      Formato de correo invÃ¡lido.
    </small>

    <!-- Password Field -->
    <div class="input-group">
      <span class="icon">ğŸ”’</span>
      <input id="password" type="password" formControlName="password" placeholder="ContraseÃ±a" required [ngClass]="{'is-invalid': form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched), 'is-valid': form.get('password')?.valid}">
    </div>
    <small *ngIf="form.get('password')?.hasError('required') && (form.get('password')?.dirty || form.get('password')?.touched)" class="error-text">
      La contraseÃ±a es obligatoria.
    </small>
    <small *ngIf="form.get('password')?.hasError('minlength') && (form.get('password')?.dirty || form.get('password')?.touched)" class="error-text">
      MÃ­nimo 5 caracteres.
    </small>

    <!-- Confirm Password Field -->
    <div class="input-group">
      <span class="icon">âœ…</span>
      <input id="confirmPassword" type="password" formControlName="confirmPassword" placeholder="Confirmar contraseÃ±a" required [ngClass]="{'is-invalid': form.get('confirmPassword')?.invalid && (form.get('confirmPassword')?.dirty || form.get('confirmPassword')?.touched), 'is-valid': form.get('confirmPassword')?.valid}">
    </div>
    <small *ngIf="form.get('confirmPassword')?.hasError('required') && (form.get('confirmPassword')?.dirty || form.get('confirmPassword')?.touched)" class="error-text">
      La confirmaciÃ³n es obligatoria.
    </small>
    <small *ngIf="form.get('confirmPassword')?.hasError('passwordsDoNotMatch') && (form.get('confirmPassword')?.dirty || form.get('confirmPassword')?.touched)" class="error-text">
      Las contraseÃ±as no coinciden.
    </small>

    <!-- Backend Error Message -->
    <div *ngIf="backendErrorMessage" class="error-message">
      {{ backendErrorMessage }}
    </div>

    <!-- Success Message -->
    <div *ngIf="successfulRegistration" class="success-message">
      Â¡Registro exitoso! Redirigiendo al login...
    </div>

    <!-- Submit Button -->
    <button type="submit" [disabled]="form.invalid">Crear cuenta</button>
  </form>

  <div class="login-redirect">
    <p>Â¿Ya tienes una cuenta? <a (click)="navigateToLogin()">Inicia sesiÃ³n aquÃ­</a>.</p>
  </div>
</div>