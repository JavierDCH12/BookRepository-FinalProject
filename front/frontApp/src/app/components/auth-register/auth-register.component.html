<div class="container">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h2>Registro</h2>

    <div class="input-group">
      <span class="icon">游녻</span>
      <input id="username" type="text" formControlName="username" pattern="^.{5,}$" required
        placeholder="Ingresa tu nombre de usuario">
    </div>
    <span *ngIf="form.get('username')?.invalid && form.get('username')?.touched" class="error-text">
      <span *ngIf="form.get('username')?.hasError('required')">El nombre de usuario es requerido.</span>
      <span *ngIf="form.get('username')?.hasError('minlength')">El nombre de usuario debe tener al menos 5
        caracteres.</span>
    </span>

    <div class="input-group">
      <span class="icon">游닎</span>
      <input id="email" type="email" formControlName="email" required placeholder="Ingresa tu correo electr칩nico">
    </div>
    <span *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="error-text">
      <span *ngIf="form.get('email')?.hasError('required')">El correo electr칩nico es requerido.</span>
      <span *ngIf="form.get('email')?.hasError('email')">Correo electr칩nico inv치lido.</span>
    </span>

    <div class="input-group">
      <span class="icon">游</span>
      <input id="password" type="password" formControlName="password" pattern="^.{5,}$" required
        placeholder="Ingresa tu contrase침a">
    </div>
    <span *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="error-text">
      <span *ngIf="form.get('password')?.hasError('required')">La contrase침a es requerida.</span>
      <span *ngIf="form.get('password')?.hasError('minlength')">La contrase침a debe tener al menos 5 caracteres.</span>
    </span>

    <div class="input-group">
      <span class="icon">游댐</span>
      <input id="confirmPassword" type="password" formControlName="confirmPassword" required
        placeholder="Confirma tu contrase침a">
    </div>
    <span *ngIf="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched" class="error-text">
      <span *ngIf="form.get('confirmPassword')?.hasError('required')">La confirmaci칩n de la contrase침a es
        requerida.</span>
      <span *ngIf="form.get('confirmPassword')?.hasError('passwordsDoNotMatch')">Las contrase침as no coinciden.</span>
    </span>

    <div *ngIf="backendErrorMessage" class="error-message">
      {{ backendErrorMessage }}
    </div>
    <div *ngIf="successfulRegistration" class="success-message">
      춰Registro exitoso! Redirigiendo al inicio de sesi칩n...
    </div>

    <button type="submit" [disabled]="form.invalid || isLoading">
      <i *ngIf="isLoading" class="pi pi-spin pi-spinner" style="font-size: 1.2rem; margin-right: 6px;"></i>
      Registrar
    </button>
  </form>

  <div class="register-section">
    <p>쯏a tienes una cuenta?</p>
    <button type="button" (click)="navigateToLogin()" class="login-button">Ir al Login</button>
  </div>
</div>
