<!-- ğŸ” CONTENEDOR PRINCIPAL -->
<div class="search-container">

  <!-- ğŸ” FORMULARIO DE BÃšSQUEDA -->
  <div class="search-form">
    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="searchParams.title"
        placeholder="TÃ­tulo"
      />
    </div>
    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="searchParams.author"
        placeholder="Autor"
      />
    </div>
    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="searchParams.genre"
        placeholder="GÃ©nero"
      />
    </div>
    <button class="search-button" (click)="onSearch()">Buscar</button>
  </div>

  <!-- ğŸ“š RESULTADOS DE BÃšSQUEDA -->
  <div class="results-container" *ngIf="results.length > 0">
    <div class="book-grid">
      <div *ngFor="let book of results" class="book-card">

        <div class="book-cover">
          <img *ngIf="book.cover_url"
               [src]="book.cover_url"
               alt="Portada"
               (click)="navigateToBookDetail(book.book_key)" />
        </div>

        <div class="book-info">
          <h4 (click)="navigateToBookDetail(book.book_key)">
            {{ book.title }}
          </h4>

          <p *ngIf="book.author" class="author">
            ğŸ‘¤
            <a href="#" (click)="
                $event.preventDefault(); getAuthorWikipediaLink(book.author)">
              {{ book.author }}
            </a>
          </p>

          <p *ngIf="book.first_publish_year" class="publish-year">
            ğŸ“… {{ book.first_publish_year }}
          </p>

          <p *ngIf="book.genres" class="genres">
            ğŸ·ï¸ GÃ©nero: {{ formatGenres(book.genres) }}
          </p>
        </div>

        <!-- â­ Botones -->
        <button (click)="toggleFavorite(book); $event.stopPropagation()"
                class="fav-toggle-button"
                [class.active]="isFavorite(book.book_key)">
          <i class="pi" [ngClass]="isFavorite(book.book_key) ? 'pi-star-fill' : 'pi-star'"></i>
          {{ isFavorite(book.book_key) ? 'Favorito' : 'AÃ±adir a favoritos' }}
        </button>

        <button (click)="toggleWishlist(book); $event.stopPropagation()"
                class="wishlist-button"
                [class.active]="isInWishlist(book.book_key)">
          <span class="heart-icon">
            {{ isInWishlist(book.book_key) ? 'â¤ï¸ En wishlist' : 'ğŸ¤ AÃ±adir a wishlist' }}
          </span>
        </button>

      </div>
    </div>
  </div>

  <!-- âŒ MENSAJE CUANDO NO HAY RESULTADOS -->
  <div *ngIf="results.length === 0 && !isLoading && hasSearched" class="no-favorites">
    No se encontraron libros. Intenta otra bÃºsqueda ğŸ”
  </div>

</div>
